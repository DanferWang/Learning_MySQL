# 视图

#### **Origin: Danfer Wang**

会有这样的需求：将一张表中的特定列（字段）数据的查看权限授予给某些用户，而不是给出完整表。

## 基本概念

视图是一种虚拟表，其内容由查询定义。同真实表相同，视图包含列（字段），其数据来自其对应的真实表（基表）。

视图与基表之间存在一种映射关系。

- 视图是根据（多个）基表来创建的，同一张基表可以产生若干个视图
- 通过视图可以修改基表的数据，基表中数据的改变也会影响到视图中的数据

## 基本使用

- 创建视图

  ```mysql
  CREATE VIEW view_name
  	AS
  	SELECT col_1 [, col_2, ...] FROM tbl_name
  ```

- 查看视图

  ```mysql
  DESC view_name
  ```

- 查看创建视图的指令

  ```mysql
  SHOW CREATE VIEW view_name
  ```

- 删除视图

  ```mysql
  DROP VIEW view_name
  ```

  

## 细节讨论

- 创建视图后，数据库文件中不会产生新的.idb文件，对应试图只有一个视图结构.frm文件
- 修改视图中的数据[UPDATE DELETE INSERT]，基表中数据也会改变；修改基表中的数据，视图中数据也会发生改变
- 视图中可以再使用创建视图，数据仍然来自于基表

## 视图的使用实践

- **安全性**： 基表中的保密列（字段）不会给用户直接看到，在视图中仅保留一部分列（字段）
- **性能**：使用视图将多个基表中的列（字段）结合起来，避免重复使用连接（JOIN）查询数据，提高查询效率
- **灵活性**：建立视图，将基表中的数据直接映射到新建的视图，并使用该视图替换基表，以较小的改动达到升级数据表的目的

